
@{
    ViewData["Title"] = "Stories";
}

<style>
    .page-sub-header {
        margin-left: -15px;
        margin-right: -15px;
        min-height: 90px;
        background: #fff;
        padding-top: 15px;
        box-shadow: 0 1px 1px -1px rgba(0,0,0,.34), 0 0 6px 0 rgba(0,0,0,.14);
    }

    .page-header-title {
        font-size: 16px;
        font-weight: 100;
        padding-left: 20px;
        color: white;
    }

    .tab.nav-tabs {
        text-transform: uppercase;
    }

    .no-bottom-border {
        border-bottom: 0 !important;
    }

    .nav.nav-tabs li {
        background: 0;
        border: 0;
    }

    .tab.nav-tabs > li.active > a, .tab.nav-tabs > li.active > a:hover, .tab.nav-tabs > li.active > a:focus {
        background-color: #4285f6;
        color: white !important;
        border: 0;
        border-bottom: 3px solid white;
        font-weight: 500;
    }

    .tab.nav-tabs > li > a {
        color: #ffffb3 !important;
        font-weight: 400;
    }

        .tab.nav-tabs > li > a:hover, .tab.nav-tabs > li > a:focus {
            background-color: #4285f6;
            color: #ffffb3 !important;
            border-color: transparent;
        }

    #yours {
        padding-left: 20px;
    }

    .story-content {
        margin-top: 2%;
    }

    .e-grid .e-groupdroparea {
        font-weight: 400 !important;
    }
     
</style>

@section Styles{
    <link href="~/css/ej2/material.css" rel="stylesheet" />
    <link href="~/css/toast.css" rel="stylesheet" />
}
@section Scripts {
  
<script src="~/js/ej2/ej2.min.js"></script>
<script src="~/js/toast.js"></script> 
<script src="~/js/stories.js"></script>
}

<div class="row page-sub-header" style="margin-bottom: 0;padding-bottom: 0; background: #4285f6;font-weight:400">
    <div class="page-header-title">
        <p style="font-weight:500;margin-top:5px">@ViewBag.ProjectName</p>
    </div>
    <div class="page-header-title" style="margin-top: 10px;margin-bottom: -4px;">
        <p style="font-weight:400;font-size:13px">@ViewBag.ProjectDescription</p>
    </div>
</div>

<div id="toast_type"></div>
<div class="alert alert-info" style="margin-top:20px;margin-bottom:10px">
    <ul style="margin-left:-10px">
        <li>Here, you can prepare a plan for your project. A title is enough to create stories; rest all fields are optional.</li>
        <li>Some of typical use cases of this page are used to prepare a roadmap, plan stories for features, sprint, epic, or themes. Prepare estimates, filter/sort stories based on priority, benefits, and penalty.</li>
        <li>You can find some more fields when you click the columns button, which can be utilized based on project need or requirement.</li>
        <li>To group a story using a theme, epic, sprint, or release, drag and drop the column header to the below area.</li>
    </ul>
</div>

<section class="content story-content">  
    <input type="hidden" id="projectId" value="@ViewBag.ProjectId" />
    <div class="row">
        <div class="col-md-12">
            <ejs-grid id="storiesList" allowFiltering="true" allowSorting="true" showColumnMenu="true" showColumnChooser="true" allowResizing="true" allowTextWrap="true" dataBound="databound" load="load" enableHover="false" toolbar="@(new List<string>() { "ExcelExport", "Add", "Edit", "Delete", "Update", "Cancel", "Search", "ColumnChooser" })" allowExcelExport="true" toolbarClick="toolbarClick" actionBegin="actionBegin" allowGrouping="true" created="create" actionComplete="actionComplete" allowSelection="true" allowPaging="true">
                <e-grid-editSettings allowAdding="true" allowDeleting="true" allowEditing="true"></e-grid-editSettings>
                <e-data-manager url='/showcase/aspnetcore/task-planner/storieslist/@ViewBag.ProjectId' adaptor="UrlAdaptor"></e-data-manager>
                <e-grid-filterSettings type="CheckBox"></e-grid-filterSettings>
                <e-grid-columns>
                    <e-grid-column field="SortOrder" headerText="Sort Order" validationRules="@(new { required=true, number=true})" visible="false" editType="numericedit" clipMode="EllipsisWithTooltip"></e-grid-column>
                    <e-grid-column field="StoryId" headerText="Story ID" isPrimaryKey="true" showInColumnChooser="false" editType="numeric" visible="false" clipMode="EllipsisWithTooltip"></e-grid-column>
                    <e-grid-column field="TaskId" headerText="Task ID" validationRules="@(new {number=true})" editType="numerice" visible="false" clipMode="EllipsisWithTooltip"></e-grid-column>
                    <e-grid-column field="Title" headerText="Title" validationRules="@(new {required=true})" width="150" clipMode="EllipsisWithTooltip"></e-grid-column>
                    <e-grid-column field="ThemeName" headerText="Theme" validationRules="@(new {required=true})" clipMode="EllipsisWithTooltip"></e-grid-column>
                    <e-grid-column field="EpicName" headerText="Epic" validationRules="@(new {required=true})" clipMode="EllipsisWithTooltip"></e-grid-column>
                    <e-grid-column field="StoryPoints" headerText="Estimate" validationRules="@(new {number=true})" editType="numerice" clipMode="EllipsisWithTooltip"></e-grid-column>
                    <e-grid-column field="Milestone" headerText="Milestone" visible="false" editType="numeric" clipMode="EllipsisWithTooltip"></e-grid-column>
                    <e-grid-column field="Benifit" headerText="Benifit" validationRules="@(new {number=true})" editType="numeric" clipMode="EllipsisWithTooltip"></e-grid-column>
                    <e-grid-column field="Penalty" headerText="Penalty" validationRules="@(new {number=true})" editType="numeric" clipMode="EllipsisWithTooltip"></e-grid-column>
                    <e-grid-column field="Priority" headerText="Priority" visible="true" clipMode="EllipsisWithTooltip"></e-grid-column> 
                    <e-grid-column field="Release" headerText="Release" visible="true" validationRules="@(new {required=true})" clipMode="EllipsisWithTooltip"></e-grid-column> 
                    <e-grid-column field="Status" headerText="Status" editType="dropdownedit" width="150"></e-grid-column>
                    <e-grid-column field="SprintName" headerText="Sprint" visible="false" clipMode="EllipsisWithTooltip"></e-grid-column>
                    <e-grid-column field="AssigneeName" headerText="Assignee" visible="false" clipMode="EllipsisWithTooltip"></e-grid-column>
                    <e-grid-column field="Tag" headerText="Tag" visible="false" clipMode="EllipsisWithTooltip"></e-grid-column>
                </e-grid-columns>
            </ejs-grid>
        </div>
    </div>


    <script id="template" type="text/x-template">

        <div class="e-pagertemplate">
            <div class="col-lg-12 control-section">
                <div class="content-wrapper">
                    <input id="CurrentPage" type="text" value=${currentPage}>
                </div>
            </div>

            <div id="totalPages" class="e-pagertemplatemessage" style="margin-top:5px;margin-left:30px;border: none; display: inline-block ">
                <span class="e-pagenomsg">${currentPage} of ${totalPages} pages (${totalRecordsCount} items)</span>
            </div>
        </div>
    </script>
</section>